// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Project {
  id               String      @id @default(uuid())
  title            String
  description      String
  category         String
  tokenSymbol      String
  totalSupply      String
  totalFunding     String
  initialPrice     String
  licenseType      String
  royaltyRate      String
  nftContract      String
  tokenId          String
  createdAt        DateTime    @default(now())
  creatorAddress   String
  ipfsMetadataHash String?
  nftMetadataHash  String?
  milestones       Milestone[]
  licenses         License[]
  documents        Document[]
}

model Milestone {
  id          String   @id @default(uuid())
  project     Project  @relation(fields: [projectId], references: [id])
  projectId   String
  title       String
  description String
  funding     String
}

model License {
  id                      String   @id @default(uuid())
  project                 Project  @relation(fields: [projectId], references: [id])
  projectId               String
  type                    String
  commercialUse           Boolean
  commercialRevShare      Int
  derivativesAllowed      Boolean
  derivativesAttribution  Boolean
  researchUseAllowed      Boolean
  dataSharingRequirement  String
  derivativeRoyaltyShare  Int
  attachedAt              DateTime @default(now())
}

model Document {
  id         String   @id @default(uuid())
  project    Project  @relation(fields: [projectId], references: [id])
  projectId  String
  url        String
  uploadedAt DateTime @default(now())
}
